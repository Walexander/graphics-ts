import{a9 as m,aa as f,ab as k,H as v,ac as Z,ad as I,ae as g,af as K,ag as U,ah as V,a as b,ai as Y,aj as O,ak as aa,al as ta,D as i,l as o,am as sa,R as p,an as ea,ao as ra,J as x,ap as na,aq as oa,ar as F,as as ia,m as r,at as ca,Z as l,A as L,d as $,a4 as la,au as A,av as pa,aw as ua,_ as ma,q as fa,Q as va,n as Ta,p as u,v as y,T as ga,W as da,w as B,ax as ya,ay as E,y as C,g as ha,h as wa,a5 as Ia,az as Sa,B as Ma,aA as Pa,aB as ka,s as ba,t as S,k as d,aC as xa,b as Fa}from"./Shape-4cee9570.js";import{l as La,R as D,t as q,a as $a}from"./utils-ce2f5171.js";import{d as N,e as Aa,r as Ba,f as Ea,h as Ca,i as Da,j as qa,m as Na,t as M}from"./Stream-be148cc6.js";const R=m(),Ra=f(R,k.pipe(v(t=>_a(t))));function _a(t){const a=Z(k,t);return{moveTo:I(Y,a),lineTo:I(O,a),beginPath:a(g(K,void 0)),stroke:a(g(U(),void 0))}}const _=m(),za=V(Ra,f(_,R.pipe(v(t=>ja(t)))));function ja(t){return([[a,s],[e,n]])=>b([t.beginPath,t.moveTo(a,s),t.lineTo(e,n),t.stroke],{discard:!0})}const z=m();function Ga(t){return f(z,aa(function*(a){const s=yield*a(ta(t)),e=yield*a(_);return new Ha(s,e)}))}const Wa=Ga({theta:0,position:[0,0]});class Ha{constructor(a,s){this.state=a,this.draw=s}drawForward(a){return i(ea(this.state),v(s=>[s,Ja(s,a)]),p(([s,e])=>this.draw([s.position,e])),v(([{theta:s},e])=>({theta:s,position:e})),o(s=>g(sa(this.state,s),s)))}turn(a){return ra(this.state,({theta:s,position:e})=>({theta:s+a,position:e}))}}function Ja({position:[t,a],theta:s},e){return[t+e*Math.cos(s),a+e*Math.sin(s)]}const{millis:h}=Sa;function w(){return fa(st(771))}const Qa=x.pipe(o(({width:t,height:a})=>na(0,0,t,a).pipe(o(s=>oa(()=>createImageBitmap(s))),F,v(s=>ia(s,va(t/-2,a/-2))),p(s=>La(e=>B(i(L(0,0,t,a),r($(t/2,a/2)),r(Ma(-e/4)),r(C(s)),r(y(l,h(16)))))))))),Xa=i(l,r(x),p(({width:t,height:a})=>i(l,r(L(0,0,t,a)),r($(t/2,a/2)))),r(ca(3.5,3.5)),r(D.pipe(o(q(w)))),g(null));function Za(t){return i(at,N(3,(a,[s,e])=>[s==a**2?a+2:a,{nextSquare:a**2,isPrime:e,num:s}]),M(({isPrime:a})=>a?y(l,h(16)):l),M(Oa(t)),Na(Ka),qa(a=>z.pipe(o(a))),Da(t))}function Ka({num:t,isPrime:a,nextSquare:s}){return n=>i(b([xa(a?3:1),Fa(a?"transparent":S(d(0,0,0,.25)))],{discard:!0}),r(n.drawForward(3)),p(({position:[c,T]})=>a?ba(S(d(Math.atan2(T,c)*180/Math.PI,.5,.5,1))):l),r(n.turn(e(t,Math.sqrt(s)))),p(({position:c})=>a?Pa(ka(c[0],c[1],2,0,Math.PI*2)):l),r(n.drawForward(3)));function e(n,c){const T=c-2,J=c**2,Q=c-1,X=n-T**2;return n==2||T**2+1==n||n!=J&&X%Q==0?Math.PI/2:0}}const j=m(),Ua=f(j,H("prime")),G=m(),Va=f(G,H("latest")),W=m(),Ya=f(W,la(new Intl.NumberFormat));function Oa(t){return({num:a,isPrime:s})=>W.pipe(o(e=>s?j.pipe(o(P(e.format(a)))):a>1e3&&a%100==0||a<=1e3&&a%10==0||a==t?G.pipe(o(P(e.format(a)))):l))}function H(t){return i(A(()=>E(document.getElementById(t))),o(a=>a),F)}function P(t){return a=>A(()=>{a.innerText=t})}const at=i(Aa(2,Number.MAX_SAFE_INTEGER),N(pa(),tt));function tt(t,a){const s=a>1&&ua(t,n=>a%n!==0),e=[a,s];return[s?ma(t,a):t,e]}const st=t=>i(Ca(Xa),Ea(Za(t)),Ba,o(a=>i(a,ya(s=>E(s)),p(s=>C(et(s))))),B,da,p(([a])=>ga(`duration: ${a.value}ms `)),r(y(Qa,h(3e3))),r(D.pipe(o(q(w)))),u(Wa),u(za),u(Ua),u(Va),u(Ya),u($a),Ta("canvas4"));function et({position:[t,a]}){return ha(Ia(t,a,4),wa(d(0,.5,0,.5)))}w();
