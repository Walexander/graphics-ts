import{a8 as m,a9 as f,aa as P,H as v,ab as k,ac as I,ad as g,ae as Z,af as K,ag as V,a as F,ah as Y,ai as O,aj as aa,ak as ta,D as i,l as o,al as sa,R as p,am as ea,an as ra,J as b,ao as na,ap as oa,aq as L,ar as ia,m as r,as as la,Z as c,A as $,d as A,a4 as ca,at as B,au as pa,av as ua,_ as ma,q as fa,Q as va,n as da,aw as ga,p as u,v as y,x as w,U as Ta,W as ya,w as C,ax as wa,ay as E,y as R,g as Sa,a5 as Ia,i as ha,B as xa,az as Ma,aA as Pa,s as ka,t as h,k as T,aB as Fa,b as ba}from"./Shape-9d40d40f.js";import{l as La,R as q,t as D,a as $a}from"./utils-e0e04d5f.js";import{d as N,e as Aa,l as Ba,r as Ca,f as Ea,h as Ra,i as qa,j as Da,m as Na,t as x}from"./Stream-334c6260.js";const _=m(),_a=f(_,P.pipe(v(t=>za(t))));function za(t){const a=k(P,t);return{moveTo:I(Y,a),lineTo:I(O,a),beginPath:a(g(Z,void 0)),stroke:a(g(K(),void 0))}}const z=m(),ja=V(_a,f(z,_.pipe(v(t=>Ga(t)))));function Ga(t){return([[a,s],[e,n]])=>F([t.beginPath,t.moveTo(a,s),t.lineTo(e,n),t.stroke],{discard:!0})}const j=m();function Wa(t){return f(j,aa(function*(a){const s=yield*a(ta(t)),e=yield*a(z);return new Ja(s,e)}))}const Ha=Wa({theta:0,position:[0,0]});class Ja{constructor(a,s){this.state=a,this.draw=s}drawForward(a){return i(ea(this.state),v(s=>[s,Qa(s,a)]),p(([s,e])=>this.draw([s.position,e])),v(([{theta:s},e])=>({theta:s,position:e})),o(s=>g(sa(this.state,s),s)))}turn(a){return ra(this.state,({theta:s,position:e})=>({theta:s+a,position:e}))}}function Qa({position:[t,a],theta:s},e){return[t+e*Math.cos(s),a+e*Math.sin(s)]}function S(){return fa(et(771))}const Ua=b.pipe(o(({width:t,height:a})=>na(0,0,t,a).pipe(o(s=>oa(()=>createImageBitmap(s))),L,v(s=>ia(s,va(t/-2,a/-2))),p(s=>La(e=>C(i($(0,0,t,a),r(A(t/2,a/2)),r(xa(-e/4)),r(R(s)),r(y(c,w(16)))))))))),Xa=i(c,r(b),p(({width:t,height:a})=>i(c,r($(0,0,t,a)),r(A(t/2,a/2)))),r(la(3.5,3.5)),r(q.pipe(o(D(S)))),g(null));function Za(t){return i(tt,N(3,(a,[s,e])=>[s==a**2?a+2:a,{nextSquare:a**2,isPrime:e,num:s}]),x(({isPrime:a})=>a?y(c,w(16)):c),x(at(t)),Na(Ka),Da(a=>j.pipe(o(a))),qa(t))}function Ka({num:t,isPrime:a,nextSquare:s}){return n=>i(F([Fa(a?3:1),ba(a?"transparent":h(T(0,0,0,.25)))],{discard:!0}),r(n.drawForward(3)),p(({position:[l,d]})=>a?ka(h(T(Math.atan2(d,l)*180/Math.PI,.5,.5,1))):c),r(n.turn(e(t,Math.sqrt(s)))),p(({position:l})=>a?Ma(Pa(l[0],l[1],2,0,Math.PI*2)):c),r(n.drawForward(3)));function e(n,l){const d=l-2,Q=l**2,U=l-1,X=n-d**2;return n==2||d**2+1==n||n!=Q&&X%U==0?Math.PI/2:0}}const G=m(),Va=f(G,J("prime")),W=m(),Ya=f(W,J("latest")),H=m(),Oa=f(H,ca(new Intl.NumberFormat));function at(t){return({num:a,isPrime:s})=>H.pipe(o(e=>s?G.pipe(o(M(e.format(a)))):a>1e3&&a%100==0||a<=1e3&&a%10==0||a==t?W.pipe(o(M(e.format(a)))):c))}function J(t){return i(B(()=>E(document.getElementById(t))),o(a=>a),L)}function M(t){return a=>B(()=>{a.innerText=t})}const tt=i(Aa(2,Number.MAX_SAFE_INTEGER),N(pa(),st));function st(t,a){const s=a>1&&ua(t,n=>a%n!==0),e=[a,s];return[s?ma(t,a):t,e]}const et=t=>i(Ra(Xa),Ea(Za(t)),Ca,o(a=>i(a,wa(s=>E(s)),p(s=>R(rt(s))))),C,ya,p(([a])=>Ba(`duration: ${Ta(a).toFixed(3)}s`)),r(y(Ua,w(3e3))),r(q.pipe(o(D(S)))),u(Ha),u(ja),u(Va),u(Ya),u(Oa),u($a),k(ga,{willReadFrequently:!0}),da("canvas4"));function rt({position:[t,a]}){return Sa(Ia(t,a,4),ha(T(0,.5,0,.5)))}S();
